# ==============================
# Required
# ==============================
OPENAI_API_KEY=sk-...
MEET_URL=https://meet.google.com/xxx-xxxx-xxx
CONTROL_API_TOKEN=replace-with-strong-token

# Optional context injected into system prompt
PROJECT_CONTEXT=

# ==============================
# Core runtime (server-only)
# ==============================
VOICE_CORE_MODE=server
VOICE_CORE_VERBOSE_LOGS=false
VOICE_CORE_MIN_USER_AUDIO_MS=400
VOICE_CORE_MIN_TRANSCRIPT_CHARS=3
VOICE_CORE_MIN_AUDIO_MS_WITHOUT_TRANSCRIPT=1200
VERBOSE_SESSION_LOGS=true

OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.8
SYSTEM_PROMPT_FILE=prompts/system-prompt.txt
# Optional override (has priority over SYSTEM_PROMPT_FILE)
SYSTEM_PROMPT=
BOT_NAME=Meet Voice Bot
LANGUAGE=en-US

# ==============================
# OpenAI Realtime session profile
# ==============================
OPENAI_REALTIME_MODEL=gpt-4o-mini-realtime-preview-2024-12-17
OPENAI_REALTIME_CONNECT_TIMEOUT_MS=8000
OPENAI_REALTIME_INPUT_TRANSCRIPTION_MODEL=gpt-4o-mini-transcribe
OPENAI_REALTIME_TURN_DETECTION=semantic_vad
OPENAI_REALTIME_TURN_EAGERNESS=auto
OPENAI_REALTIME_VAD_THRESHOLD=0.45
OPENAI_REALTIME_VAD_SILENCE_MS=280
OPENAI_REALTIME_VAD_PREFIX_PADDING_MS=180
OPENAI_REALTIME_INTERRUPT_RESPONSE_ON_TURN=true

# ==============================
# TTS / speech output
# ==============================
OPENAI_TTS_MODEL=gpt-4o-mini-tts
OPENAI_TTS_VOICE=alloy
OPENAI_TTS_VOICE_ID=
OPENAI_TTS_FORMAT=mp3
OPENAI_TTS_INSTRUCTIONS=
OPENAI_TTS_SPEED=1.0
OPENAI_TTS_STREAM_FORMAT=audio
OPENAI_TTS_TIMEOUT_MS=8000

# Bridge device routing (Meet bot runtime)
OPENAI_STT_DEVICE_ID=
OPENAI_STT_DEVICE_LABEL=Meet-RX-In
OPENAI_STT_PREFER_LOOPBACK=true
BRIDGE_TTS_OUTPUT_DEVICE_ID=
BRIDGE_TTS_OUTPUT_DEVICE_LABEL=Meet-TX

# ==============================
# Turn-taking / interruption (server core)
# ==============================
BARGE_IN_ENABLED=true
BARGE_IN_MIN_MS=220
SOFT_INTERRUPT_ENABLED=true
SOFT_INTERRUPT_CONFIRM_MS=220
SOFT_INTERRUPT_DUCK_LEVEL=0.22
SILENCE_AFTER_SPEAK_MS=180
INBOUND_DEDUP_MS=10000

SEMANTIC_EOT_ENABLED=true
SEMANTIC_EOT_USE_LLM=false
SEMANTIC_EOT_MODEL=gpt-4o-mini
SEMANTIC_EOT_TIMEOUT_MS=180
SEMANTIC_EOT_MIN_DELAY_MS=250
SEMANTIC_EOT_MAX_DELAY_MS=900

# ==============================
# Auto greeting / intake
# ==============================
AUTO_GREETING_ENABLED=true
AUTO_GREETING_DELAY_MS=2000
AUTO_GREETING_PROMPT=System event: The Google Meet call has just connected and the user is silent. Start with one short friendly opening, briefly introduce yourself as SmartSpine's live assistant, then ask for the user's name and goal. Do not use rigid scripted wording.

INTAKE_COMPLETE_TOKEN=[[INTAKE_COMPLETE]]
AUTO_LEAVE_ON_INTAKE_COMPLETE=true
INTAKE_COMPLETE_LEAVE_DELAY_MS=1800

# ==============================
# Call summary
# ==============================
CALL_SUMMARY_ENABLED=true
CALL_SUMMARY_MODEL=gpt-4o-mini
CALL_SUMMARY_TEMPERATURE=0.2
CALL_SUMMARY_MAX_TURNS=40
CALL_SUMMARY_MAX_TRANSCRIPT_CHARS=12000
CALL_SUMMARY_MAX_OUTPUT_CHARS=1500
CALL_SUMMARY_TIMEOUT_MS=12000

# ==============================
# Browser / Meet runtime
# ==============================
HEADLESS=false
CHROME_PATH=
CHROME_USER_DATA_DIR=.chrome-profile
MEET_ASSUME_LOGGED_IN=false
MEET_JOIN_STATE_TIMEOUT_MS=6000
MEET_JOIN_POLL_MS=1200
MEET_JOIN_CLICK_ATTEMPTS=8
MEET_JOIN_CLICK_RETRY_MS=700

# Bridge host
BRIDGE_HOST=127.0.0.1
BRIDGE_PORT=3100

# ==============================
# Control API
# ==============================
CONTROL_API_HOST=127.0.0.1
CONTROL_API_PORT=3200
CONTROL_API_CORS_ALLOWLIST=http://127.0.0.1:3300,http://localhost:3300
ALLOW_ANY_MEET_URL=false

# ==============================
# Secure UI-managed config store
# ==============================
# 32-byte key (hex/base64/raw supported by config-overrides-store)
CONFIG_ENCRYPTION_KEY=
CONFIG_OVERRIDES_FILE=.config/config.overrides.enc
CONFIG_AUDIT_FILE=.config/config.audit.log
CONFIG_BACKUPS_DIR=.config/config-backups
